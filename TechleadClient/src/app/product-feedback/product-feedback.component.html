<app-nav-menu [MemberLoginStatus]="loginStatus"></app-nav-menu>
<div class="col-md-6 offset-md-3 mt-5">
  <div class="card">
    <h4 class="card-header">Techlead Create Feedback</h4>
    <div class="card-body">
      <form [formGroup]="createFeedbackForm" (ngSubmit)="createFeedback()">
        <!--Product Type-->
        <div class="form-group">
          <label for="productTypeSelection">Product Type</label>
          <select class="form-control" formControlName="productTypeSelection"
                  value="productType" (change)="onChangeProductType()"
                  [ngClass]="{ 'is-invalid': submitted && f.productTypeSelection.errors }">
            <option value="" disabled selected>Product Type</option>
            <option value="phone">Phone</option>
            <option value="pc">PC</option>
            <option value="laptop">Laptop</option>
          </select>
          <div *ngIf="submitted && f.productTypeSelection.errors" class="invalid-feedback">
            <div *ngIf="f.productTypeSelection.errors.required">Product type is required</div>
          </div>
        </div>
        <br/>
        <!--Feedback info appears after a product type is selected-->
        <div class="form-group" *ngIf="selectedProductType">
          <div *ngIf="phoneTypeSelected">
            <label for="productSelection">Product</label>
            <select class="form-control" formControlName="productSelection"
                    value="selectedProduct" [ngClass]="{ 'is-invalid': submitted && f.productSelection.errors }">
              <option *ngFor="let phone of phones" [value]="phone">{{phone.Name}}</option>
            </select>
            <div *ngIf="submitted && f.productSelection.errors" class="invalid-feedback">
              <div *ngIf="f.productSelection.errors.required">Phone is required</div>
            </div>
          </div>
          <div *ngIf="pcTypeSelected">
            <label for="productSelection">Product</label>
            <select class="form-control" formControlName="productSelection"
                    value="selectedProduct" [ngClass]="{ 'is-invalid': submitted && f.productSelection.errors }">
              <option *ngFor="let pc of pcs" [value]="pc">{{pc.NickName}}</option>
            </select>
            <div *ngIf="submitted && f.productSelection.errors" class="invalid-feedback">
              <div *ngIf="f.productSelection.errors.required">Pc is required</div>
            </div>
          </div>
          <div *ngIf="laptopTypeSelected">
            <label for="productSelection">Product</label>
            <select class="form-control" formControlName="productSelection"
                    value="selectedProduct" [ngClass]="{ 'is-invalid': submitted && f.productSelection.errors }">
              <option *ngFor="let laptop of laptops" [value]="laptop">{{laptop.Name}}</option>
            </select>
            <div *ngIf="submitted && f.productSelection.errors" class="invalid-feedback">
              <div *ngIf="f.productSelection.errors.required">Laptop is required</div>
            </div>
          </div>
          <br/>
          <!--Rating-->
          <div layout="row">
            <label for="rating">Rating</label>
            <br/>
            <mat-slider formControlName="rating" min="0.5" max="5" step="0.5" tickInterval="0.5"
                   thumbLabel="thumbLabel"></mat-slider>
          </div>
          <br/>
          <!--Feedback text-->
          <div layout="row">
            <label for="feedbackField">Feedback Text</label>
            <br/>
            <textarea formControlName="feedbackField" placeholder="Enter Feedback" cols="40" rows="5"
                      [ngClass]="{ 'is-invalid': submitted && f.feedbackField.errors }"></textarea>
            <div *ngIf="submitted && f.feedbackField.errors" class="invalid-feedback">
              <div *ngIf="f.feedbackField.errors.required">Feedback is required</div>
            </div>
          </div>
        </div>
        <br/>
        <span>
        <br/>
        <br/>
       <button [disabled]="loading" class="btn btn-primary">
          <span *ngIf="loading" class="spinner-border spinner-border-sm mr-1"></span>
          Submit Feedback
        </button>
      </span>
      </form>
    </div>
  </div>
</div>
